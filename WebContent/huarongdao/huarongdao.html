<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Hua rong dao</title>
<link href="css/hrd.css" rel="stylesheet" type="text/css">
<link href="css/css.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="js/hrd.js"></script>
<script type="text/javascript" src="js/popup.js"></script>
<script type="text/javascript">
	window.onload = function() {
		var stepNoObj = document.getElementById('stepNo');
		var replayButton = document.getElementById('btn_replay');
		var restartButton = document.getElementById('btn_restart');
		var game = new Game('main', {
			onFinish : function(g) {
				var dialog = Popup.newDialog('恭喜你，通关啦!');
				dialog.show();
				replayButton.disabled = false;
			},

			onMoveBlock : function(g) {
				stepNoObj.innerHTML = g.stepNo;
			}
		});
		
		replayButton.onclick = function() {
			//game.replay();
			var playback = new PlayBack(game);
			playback.play(game.history);
		}
		
		restartButton.onclick = function() {
			stepNoObj.innerHTML = 0;
			replayButton.disabled = true;
			game.restart();
		}
		
		game.start();
		replayButton.disabled = true;
	};
</script>
</head>
<body>
	<div class='gameborder'>
		<div id="main" class="mainboard"></div>
		<div class='bottom'>
			<table class='bottom_table'>
				<tr>
					<td class='cell_name'><span id='gameName'>华容道</span></td>
					<td class='cell_step'><span id='stepNo'>0</span></td>
					<td class='cell_buttons'>
						<input type="button" id='btn_replay' value='回放'>
						<input type="button" id='btn_restart' value='重来'>
					</td>
				</tr>
			</table>
		</div>
	</div>
</body>
</html>